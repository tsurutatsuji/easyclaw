<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EasyClaw</title>
<style>
:root{--bg:#0B0E13;--surface:#141820;--surface2:#1C2230;--border:#2A3040;--text:#E8ECF4;--text2:#8893A7;--accent:#FF6B35;--success:#34D399;--error:#F87171;--blue:#60A5FA}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:system-ui,sans-serif;background:var(--bg);color:var(--text);min-height:100vh}
.header{padding:20px 32px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--border)}
.logo{display:flex;align-items:center;gap:10px;font-size:20px;font-weight:800}
.logo-icon{width:36px;height:36px;background:linear-gradient(135deg,var(--accent),#FF4500);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:20px}
.user-info{font-size:13px;color:var(--text2);display:flex;align-items:center;gap:12px}
.logout-btn{background:none;border:1px solid var(--border);color:var(--text2);padding:6px 12px;border-radius:8px;cursor:pointer;font-size:12px}
.logout-btn:hover{border-color:var(--accent);color:var(--text)}
.main{max-width:720px;margin:0 auto;padding:40px 24px}
.hero{text-align:center;margin-bottom:48px}
.hero h1{font-size:28px;font-weight:800;margin-bottom:12px}
.hero p{color:var(--text2);font-size:15px}
.tabs{display:flex;gap:4px;margin-bottom:32px;background:var(--surface);border-radius:12px;padding:4px}
.tab{flex:1;padding:12px;text-align:center;border-radius:10px;font-size:14px;font-weight:600;cursor:pointer;color:var(--text2);border:none;background:none}
.tab.active{background:var(--surface2);color:var(--text)}
.panel{display:none}.panel.active{display:block}
.form-section{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:28px;margin-bottom:16px}
.form-section-title{font-size:14px;font-weight:700;color:var(--accent);text-transform:uppercase;letter-spacing:1px;margin-bottom:20px}
.form-group{margin-bottom:20px}
.form-label{display:block;font-size:13px;font-weight:600;color:var(--text2);margin-bottom:8px}
.form-hint{font-size:12px;color:var(--text2);opacity:0.7;margin-top:6px}
.form-input,.form-select{width:100%;padding:12px 16px;background:var(--bg);border:1px solid var(--border);border-radius:10px;color:var(--text);font-size:13px;outline:none}
.form-input:focus{border-color:var(--accent)}
.form-select{cursor:pointer}
.form-select option{background:var(--surface)}
.btn{width:100%;padding:16px;border:none;border-radius:12px;font-size:16px;font-weight:700;cursor:pointer;background:linear-gradient(135deg,var(--accent),#FF4500);color:white}
.btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(255,107,53,0.3)}
.btn:disabled{opacity:0.5;cursor:not-allowed;transform:none}
.btn-sub{background:var(--surface2);border:1px solid var(--border);color:var(--text2);font-size:13px;padding:10px;margin-top:12px}
.btn-sub:hover{border-color:var(--accent);color:var(--text);transform:none;box-shadow:none}
.result{margin-top:20px;padding:20px;border-radius:12px;display:none}
.result.success{display:block;background:rgba(52,211,153,0.1);border:1px solid rgba(52,211,153,0.3)}
.result.error{display:block;background:rgba(248,113,113,0.1);border:1px solid rgba(248,113,113,0.3)}
.result-title{font-size:15px;font-weight:700;margin-bottom:8px}
.result.success .result-title{color:var(--success)}
.result.error .result-title{color:var(--error)}
.result-detail{font-size:13px;color:var(--text2);line-height:1.6}
.dash-card{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:24px;margin-bottom:12px}
.dash-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.dash-user{font-size:16px;font-weight:700}
.dash-badge{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600}
.dash-badge.running{background:rgba(52,211,153,0.15);color:var(--success)}
.dash-badge.stopped{background:rgba(248,113,113,0.15);color:var(--error)}
.dash-actions{display:flex;gap:8px;margin-top:16px}
.dash-btn{padding:8px 16px;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;border:1px solid var(--border);background:var(--surface2);color:var(--text2)}
.dash-btn:hover{border-color:var(--accent);color:var(--text)}
.empty-state{text-align:center;padding:60px 20px;color:var(--text2)}
.guide-link{color:var(--blue);font-size:12px;text-decoration:none}
.spinner{display:inline-block;width:18px;height:18px;border:2px solid rgba(255,255,255,0.3);border-top-color:white;border-radius:50%;animation:spin 0.6s linear infinite;vertical-align:middle;margin-right:8px}
@keyframes spin{to{transform:rotate(360deg)}}
.switch-link{color:var(--blue);cursor:pointer;font-size:13px;text-align:center;margin-top:16px}
.switch-link:hover{text-decoration:underline}
</style>
</head>
<body>
<div class="header"><div class="logo"><div class="logo-icon">ğŸ¦</div>EasyClaw</div><div class="user-info" id="userInfo" style="display:none"><span id="userEmail"></span><button class="logout-btn" onclick="logout()">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button></div></div>
<div class="main">
<div id="authView">
<div class="hero"><h1>EasyClaw</h1><p>OpenClawã‚’1ã‚¯ãƒªãƒƒã‚¯ã§ãƒ‡ãƒ—ãƒ­ã‚¤</p></div>
<div class="form-section">
<div class="form-section-title" id="authTitle">ğŸ” ãƒ­ã‚°ã‚¤ãƒ³</div>
<div class="form-group"><label class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label><input type="email" id="authEmail" class="form-input" placeholder="you@example.com"></div>
<div class="form-group"><label class="form-label">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label><input type="password" id="authPassword" class="form-input" placeholder="6æ–‡å­—ä»¥ä¸Š"></div>
<button class="btn" id="authBtn" onclick="doAuth()">ãƒ­ã‚°ã‚¤ãƒ³</button>
<button class="btn btn-sub" id="switchBtn" onclick="switchAuth()">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆã¯ã“ã¡ã‚‰</button>
<div id="authResult" class="result"></div>
</div></div>
<div id="appView" style="display:none">
<div class="hero"><h1>OpenClawã‚’1ã‚¯ãƒªãƒƒã‚¯ã§ãƒ‡ãƒ—ãƒ­ã‚¤</h1><p>APIã‚­ãƒ¼ã¨Bot Tokenã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã€‚</p></div>
<div class="tabs"><button class="tab active" onclick="switchTab('deploy')">ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤</button><button class="tab" onclick="switchTab('dashboard')">ğŸ“Š ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</button></div>
<div id="panel-deploy" class="panel active">
<div class="form-section"><div class="form-section-title">ğŸ¤– AIãƒ¢ãƒ‡ãƒ«è¨­å®š</div>
<div class="form-group"><label class="form-label">ãƒ¦ãƒ¼ã‚¶ãƒ¼ID</label><input type="text" id="userId" class="form-input" placeholder="ä¾‹: mybot001"><div class="form-hint">åŠè§’è‹±æ•°å­—ã§å…¥åŠ›</div></div>
<div class="form-group"><label class="form-label">AIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼</label><select id="apiProvider" class="form-select"><option value="google">Googleï¼ˆGeminiï¼‰</option><option value="anthropic">Anthropicï¼ˆClaudeï¼‰</option><option value="openai">OpenAIï¼ˆGPTï¼‰</option></select></div>
<div class="form-group"><label class="form-label">AIãƒ¢ãƒ‡ãƒ«</label><select id="model" class="form-select"><option value="google/gemini-2.5-flash">Gemini 2.5 Flashï¼ˆç„¡æ–™æ ã‚ã‚Šï¼‰</option><option value="google/gemini-2.5-pro">Gemini 2.5 Pro</option><option value="anthropic/claude-sonnet-4-5-20250929">Claude Sonnet 4.5</option><option value="openai/gpt-4o">GPT-4o</option></select></div>
<div class="form-group"><label class="form-label">APIã‚­ãƒ¼</label><input type="password" id="apiKey" class="form-input" placeholder="APIã‚­ãƒ¼ã‚’å…¥åŠ›"><div class="form-hint"><a href="https://aistudio.google.com/apikey" target="_blank" class="guide-link">ğŸ“– Gemini APIã‚­ãƒ¼ã®å–å¾—æ–¹æ³•</a></div></div></div>
<div class="form-section"><div class="form-section-title">ğŸ’¬ Discordè¨­å®š</div>
<div class="form-group"><label class="form-label">Discord Bot Token</label><input type="password" id="discordToken" class="form-input" placeholder="Bot Tokenã‚’å…¥åŠ›"><div class="form-hint"><a href="https://discord.com/developers/applications" target="_blank" class="guide-link">ğŸ“– Discord Botã®ä½œæˆæ–¹æ³•</a></div></div>
<div class="form-group"><label class="form-label">ã‚ãªãŸã®Discord ãƒ¦ãƒ¼ã‚¶ãƒ¼ID</label><input type="text" id="discordUserId" class="form-input" placeholder="ä¾‹: 123456789012345678"><div class="form-hint">Discordã®è¨­å®šâ†’è©³ç´°è¨­å®šâ†’é–‹ç™ºè€…ãƒ¢ãƒ¼ãƒ‰ONâ†’è‡ªåˆ†ã®ã‚¢ã‚¤ã‚³ãƒ³å³ã‚¯ãƒªãƒƒã‚¯â†’IDã‚³ãƒ”ãƒ¼</div></div></div>
<button class="btn" id="deployBtn" onclick="deploy()">ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹</button>
<div id="result" class="result"><div class="result-title" id="resultTitle"></div><div class="result-detail" id="resultDetail"></div></div></div>
<div id="panel-dashboard" class="panel"><div id="dashContent"><div class="empty-state"><p>ğŸ¦<br><br>èª­ã¿è¾¼ã¿ä¸­...</p></div></div></div>
</div></div>
<script>
let token=localStorage.getItem('token');
let email=localStorage.getItem('email');
let isLogin=true;
if(token){showApp()}
function switchAuth(){isLogin=!isLogin;document.getElementById('authTitle').textContent=isLogin?'ğŸ” ãƒ­ã‚°ã‚¤ãƒ³':'ğŸ“ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ';document.getElementById('authBtn').textContent=isLogin?'ãƒ­ã‚°ã‚¤ãƒ³':'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ';document.getElementById('switchBtn').textContent=isLogin?'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆã¯ã“ã¡ã‚‰':'ãƒ­ã‚°ã‚¤ãƒ³ã¯ã“ã¡ã‚‰'}
async function doAuth(){const e=document.getElementById('authEmail').value.trim();const p=document.getElementById('authPassword').value;const r=document.getElementById('authResult');if(!e||!p){r.className='result error';r.innerHTML='<div class="result-title">âš ï¸ å…¥åŠ›ã‚¨ãƒ©ãƒ¼</div><div class="result-detail">ãƒ¡ãƒ¼ãƒ«ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>';return}try{const res=await fetch(isLogin?'/api/login':'/api/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:e,password:p})});const d=await res.json();if(d.success){token=d.token;email=d.email;localStorage.setItem('token',token);localStorage.setItem('email',email);showApp()}else{r.className='result error';r.innerHTML='<div class="result-title">âŒ ã‚¨ãƒ©ãƒ¼</div><div class="result-detail">'+d.error+'</div>'}}catch(err){r.className='result error';r.innerHTML='<div class="result-title">âŒ é€šä¿¡ã‚¨ãƒ©ãƒ¼</div>'}}
function showApp(){document.getElementById('authView').style.display='none';document.getElementById('appView').style.display='block';document.getElementById('userInfo').style.display='flex';document.getElementById('userEmail').textContent=email}
function logout(){token=null;email=null;localStorage.removeItem('token');localStorage.removeItem('email');document.getElementById('authView').style.display='block';document.getElementById('appView').style.display='none';document.getElementById('userInfo').style.display='none'}
function switchTab(t){document.querySelectorAll('.tab').forEach(e=>e.classList.remove('active'));document.querySelectorAll('.panel').forEach(e=>e.classList.remove('active'));if(t==='deploy'){document.querySelectorAll('.tab')[0].classList.add('active');document.getElementById('panel-deploy').classList.add('active')}else{document.querySelectorAll('.tab')[1].classList.add('active');document.getElementById('panel-dashboard').classList.add('active');loadDash()}}
async function deploy(){const btn=document.getElementById('deployBtn'),r=document.getElementById('result');const data={userId:document.getElementById('userId').value.trim(),apiProvider:document.getElementById('apiProvider').value,apiKey:document.getElementById('apiKey').value.trim(),model:document.getElementById('model').value,discordToken:document.getElementById('discordToken').value.trim(),discordUserId:document.getElementById('discordUserId').value.trim()};if(!data.userId||!data.apiKey||!data.discordToken||!data.discordUserId){r.className='result error';document.getElementById('resultTitle').textContent='âš ï¸ å…¥åŠ›ã‚¨ãƒ©ãƒ¼';document.getElementById('resultDetail').textContent='å…¨é …ç›®å…¥åŠ›ã—ã¦ãã ã•ã„';return}btn.disabled=true;btn.innerHTML='<span class="spinner"></span>ãƒ‡ãƒ—ãƒ­ã‚¤ä¸­...';r.className='result';try{const res=await fetch('/api/deploy',{method:'POST',headers:{'Content-Type':'application/json','Authorization':'Bearer '+token},body:JSON.stringify(data)});const d=await res.json();if(d.success){r.className='result success';document.getElementById('resultTitle').textContent='âœ… ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ï¼';document.getElementById('resultDetail').innerHTML='ãƒ¦ãƒ¼ã‚¶ãƒ¼: '+d.userId+'<br>ãƒ¢ãƒ‡ãƒ«: '+d.model+'<br>ãƒãƒ¼ãƒˆ: '+d.port+'<br><br>Discordã§Botã«DMã‚’é€ã£ã¦ä¼šè©±ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼'}else{r.className='result error';document.getElementById('resultTitle').textContent='âŒ ã‚¨ãƒ©ãƒ¼';document.getElementById('resultDetail').textContent=d.error}}catch(e){r.className='result error';document.getElementById('resultTitle').textContent='âŒ é€šä¿¡ã‚¨ãƒ©ãƒ¼'}btn.disabled=false;btn.innerHTML='ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹'}
async function loadDash(){const c=document.getElementById('dashContent');try{const res=await fetch('/api/my-deployment',{headers:{'Authorization':'Bearer '+token}});const d=await res.json();if(!d.exists){c.innerHTML='<div class="empty-state"><p>ğŸ¦<br><br>ã¾ã ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸBotãŒã‚ã‚Šã¾ã›ã‚“ã€‚<br>ã€Œãƒ‡ãƒ—ãƒ­ã‚¤ã€ã‚¿ãƒ–ã‹ã‚‰ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚</p></div>';return}c.innerHTML='<div class="dash-card"><div class="dash-header"><span class="dash-user">'+d.userId+'</span><span class="dash-badge '+(d.running?'running':'stopped')+'">'+(d.running?'ğŸŸ¢ ç¨¼åƒä¸­':'ğŸ”´ åœæ­¢ä¸­')+'</span></div><p style="font-size:13px;color:var(--text2)">ãƒ¢ãƒ‡ãƒ«: '+d.model+'</p><div class="dash-actions"><button class="dash-btn" onclick="stopBot(\''+d.userId+'\')">â¹ åœæ­¢</button><button class="dash-btn" onclick="deleteBot(\''+d.userId+'\')">ğŸ—‘ å‰Šé™¤</button></div></div>'}catch(e){c.innerHTML='<div class="empty-state"><p>âš ï¸ å–å¾—å¤±æ•—</p></div>'}}
async function stopBot(id){if(!confirm(id+' ã‚’åœæ­¢ã—ã¾ã™ã‹ï¼Ÿ'))return;await fetch('/api/stop/'+id,{method:'POST',headers:{'Authorization':'Bearer '+token}});loadDash()}
async function deleteBot(id){if(!confirm(id+' ã‚’å®Œå…¨ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ'))return;await fetch('/api/delete/'+id,{method:'POST',headers:{'Authorization':'Bearer '+token}});loadDash()}
</script>
</body>
</html>
